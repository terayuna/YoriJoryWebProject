
<!DOCTYPE html>
<!--[if (IE 6)|(IE 7)|(IE 8)|(IE 9)]>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml" class="old_ie">
<![endif]-->
<![if !IE]>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml" class="">
<![endif]>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<meta name="description" content="레시피">
<meta name="keywords" content="">
<title>만개의 레시피</title>
<link rel="stylesheet" type="text/css" href="http://recipe.ezmember.co.kr/static/css/bootstrap_20151111.css" />
<link rel="stylesheet" type="text/css" href="/static/css/font.css" />
<link rel="stylesheet" type="text/css" href="/static/css/font-awesome.min.css" />
<link rel="stylesheet" type="text/css" href="http://recipe.ezmember.co.kr/static/css/ez_recipe_201512301.css" />
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />
<link href="http://recipe1.ezmember.co.kr/img/icons/apple-touch-icon.png" rel="apple-touch-icon" />
<link href="http://recipe1.ezmember.co.kr/img/icons/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76" />
<link href="http://recipe1.ezmember.co.kr/img/icons/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120" />
<link href="http://recipe1.ezmember.co.kr/img/icons/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152" />
<link href="http://recipe1.ezmember.co.kr/img/icons/apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180" />
<link href="http://recipe1.ezmember.co.kr/img/icons/icon-hires.png" rel="icon" sizes="192x192" />
<link href="http://recipe1.ezmember.co.kr/img/icons/icon-normal.png" rel="icon" sizes="128x128" />
<script type="text/javascript" src="http://recipe.ezmember.co.kr/static/js/jquery-1.11.2.min.js" charset="utf-8"></script>
<script type="text/javascript">
// Common Javascript
var _WWW_URL_ = 'http://www.10000recipe.com';
var _IMG_URL_ = 'http://recipe1.ezmember.co.kr';
var _FILE_URL_ = 'http://recipe.ezmember.co.kr/cache';
var _CURRENT_PAGE_ = 'http://www.10000recipe.com/inbox/insert.html';
var _USER_ID_ = '35720182';
</script>
</head>
<body><script>
$(document).ready(function() {
    doRTKeyword();
});

$("#srhRecipeText").keypress(function(event) {
    if (event.which == 13) {
        event.preventDefault();
        $("#frmTopRecipeSearch").submit();
    }
});

var curRtword = 2;
function doRTKeyword()
{
    var backRtword = (curRtword == 1) ? 2 : 1;
    $("#RtwordDiv_"+curRtword).hide();
    $("#RtwordDiv_"+backRtword).show();
    curRtword = backRtword;
}
</script>

<a href="#" id="btnGogoTop" class="rmenu_top" style="display:none"><span class="glyphicon glyphicon-menu-up"></span></a>

    <div class="gnb">
        <div class="gnb_top_wrap">
            <div class="gnb_top">
                <h1><a href="/index.html"><img src="http://recipe1.ezmember.co.kr/img/logo4.png" alt="로고" ></a></h1>
                <div class="gnb_search">
                    <form id="frmTopRecipeSearch" method="get" action="/recipe/list.html">
                    <div class="input-group">
                        <input id="srhRecipeText" name="q" type="text" class="form-control" placeholder="" value="">
                        <span class="input-group-btn">
                                <button class="btn btn-default" type="button" onClick="$('#frmTopRecipeSearch').submit();"><span class="glyphicon glyphicon-search"></span></button>
                        </span>
                    </div>
                    </form>
                    <div class="gnb_search_word">
<ul id="RtwordDiv_1" style="display:none;"><li><a href="/recipe/list.html?q=백종원">백종원</a></li><li><a href="/recipe/list.html?q=새우">새우</a></li><li><a href="/recipe/list.html?q=두부">두부</a></li><li><a href="/recipe/list.html?q=오징어">오징어</a></li><li><a href="/recipe/list.html?q=떡볶이">떡볶이</a></li></ul><ul id="RtwordDiv_2" style="display:none;"><li><a href="/recipe/list.html?q=감자">감자</a></li><li><a href="/recipe/list.html?q=잡채">잡채</a></li><li><a href="/recipe/list.html?q=떡국">떡국</a></li><li><a href="/recipe/list.html?q=멸치볶음">멸치볶음</a></li><li><a href="/recipe/list.html?q=마늘챔">마늘챔</a></li></ul>                        <div class="gnb_search_btn">
                            <a href="javascript:void(0);" onClick="doRTKeyword()"><img src="http://recipe1.ezmember.co.kr/img/btn_arrow2_l.gif" alt="이전"></a>
                            <a href="javascript:void(0);" onClick="doRTKeyword()"><img src="http://recipe1.ezmember.co.kr/img/btn_arrow2_r.gif" alt="다음"></a>
                        </div>
                    </div>
                </div>
                <ul class="gnb_right">
                                        <li>
                        <a id="memLayerBtn" href="javascript:void(0);" data-toggle="tooltip" data-placement="top" title="마이페이지" data-original-title="마이페이지"><img src="http://recipe.ezmember.co.kr/cache/rpf/2016/01/08/0f3638792553e8ba54011fd1e3c526bc1.jpg"></a>
                        <div class="mem_layer document_common_layer" style="display:none;left:-40px;">
                            <p class="mem_layer_t"></p>
                            <p class="mem_layer_m" style="text-align:left;">
                                <a href="/profile/index.html">MY홈</a>
                                <a href="/profile/scrap.html">스크랩한 레시피</a>
                                <a href="/profile/note.html">레시피 노트</a>
                                <a href="/profile/alim.html">알림</a>
                                <a href="/profile/message.html">메시지&nbsp;<span style="color:#FF0000;" class="glyphicon glyphicon-certificate"></span></a>
                                <a href="/profile/qna.html">문의내역</a>
                                                                <a href="/user/check_login.html">회원정보수정</a>
                                <a href="/user/logout.html">로그아웃</a>                            </p>
                            <p class="mem_layer_b"></p>
                        </div>
                    </li>
                                        <li>
                        <a id="btnTopWrite" href="javascript:void(0)" data-toggle="tooltip" data-placement="top" title="레시피등록" data-original-title="레시피등록"><img src="http://recipe1.ezmember.co.kr/img/tmn_write.png"></a>
                        <div class="write_layer document_common_layer" style="display:none;left:-230px;">
                            <a href="/inbox/insert.html" class="w_layer2"><img src="http://recipe1.ezmember.co.kr/img/btn_write1.gif"><span>직접 등록하기</span></a><a id="btnBlogForm" href="javascript:void(0)" class="w_layer3" data-toggle="modal" data-target="#divModalBlogForm"><img src="http://recipe1.ezmember.co.kr/img/btn_write2.gif"><span>블로그 가져오기</span></a>
                        </div>
                    </li>
                                    </ul>
            </div>
        </div>

        <div class="gnb_nav">
            <ul class="gnb_nav_ea10">
                <li><a href="/index.html">홈</a></li>
                <li><a href="/recipe/list.html">레시피</a></li>
                <li><a href="/talk/list.html">토크</a></li>
                <li><a href="/bbs/list.html">요리정보</a></li>
                <li><a id="liTopMenu_brand" href="/brand/home.html">브랜드</a></li>
                <li><a href="/chef/news_list.html">쉐프</a></li>
                <li><a href="/ranking/home.html">랭킹</a></li>
                <li><a href="/event/list.html">이벤트</a></li>
                <li><a href="/profile/index.html">MY홈</a></li>
            </ul>
        </div>
    </div>

<script>
$(document).ready(function() {
    $(".ellipsis_title").ellipsis({row: 1});
    $(".ellipsis_title2").ellipsis({row: 2});

    $(window).scroll(function() {
        if ($(window).scrollTop() > $(window).height()*1.5) {
            $("#btnGogoTop").slideDown(300);
        } else {
            $("#btnGogoTop").slideUp(300);
        }
    });
    $('[data-toggle="tooltip"]').tooltip();
});

$(function() {
    $('#memLayerBtn').click(function (e) {
        // Used to stop the event bubbling..
        e.stopPropagation();
        $(".document_common_layer:not('.mem_layer')").hide();
        if ($('.mem_layer').is(':visible')) {
            $('.mem_layer').hide();
        } else {
            $('.mem_layer').show();
        }
    });

    $('#btnTopWrite').click(function (e) {
        // Used to stop the event bubbling..
        $(".document_common_layer:not('.write_layer')").hide();
        e.stopPropagation();
        if ($('html').is('.old_ie')) {
            //$('#divBrowserGuideModal').modal({backdrop:'static'});
            $('#divBrowserGuideModal').modal('show');
        } else {
            if ($('.write_layer').is(':visible')) {
                $('.write_layer').hide();
            } else {
                $('.write_layer').show();
            }
        }
    });
    $(document).click(function () {
        $('.document_common_layer').hide();
    });

    $("#btnBlogContentsList").click(function() {
        $("#btnBlogContentsList").html('<span class="fa fa-spinner fa-spin" style="width:'+$("#btnBlogContentsList").width()+'px"></span>');
        el = $(this);
        var params = 'q_mode=get_blog_contents_list&q_portal='+$("[name=q_portal]:checked").val()+'&q_blogid='+$("#q_blogid").val();
        $.get("/common/ajx_common.html?"+params, function(html) {
            $("#btnBlogContentsList").html('조회');
            $("#divBlogContentsList").html(html);
        });
    });
    $('#divModalBlogForm').on('show.bs.modal',function() {
        $.ajax({
            type: "POST",
            url: "/common/ajx_common.html",
            data: "q_mode=get_blog_info",
            dataType: "json",
            success: function(json) {
                if (json['portal']) {
                    $("[id^=q_portal_]").filter('[value='+json['portal']+']').trigger('click');
                }
                if (json['blog_id']) {
                    $("#q_blogid").val(json['blog_id']);
                    $("#q_blog_select_type_id").trigger('click');
                }
            },
            error: function () {

            }
        });
    });
});
var _blogIsSubmit = false;
function doChangePortal(portal) {
    var header = '';
    var tail = '';
    if (portal == 'Naver') {
        header = 'http://blog.naver.com/';
        tail = '';
    } else if (portal == 'Daum') {
        header = 'http://blog.daum.net/';
        tail = '';
    } else if (portal == 'Tistory') {
        header = 'http://';
        tail = '.tistory.com';
    }
    $("#txtBlogHeader").text(header);
    $("#txtBlogTail").text(tail);
}

function doBlogSelect() {
     var select_type = $(':radio[name="q_blog_select_type"]:checked').val();
     if (select_type == 'url') {
        var q_link = $("#q_blogurl").val();
        if ($.trim(q_link) == '') {
            alert('URL을 입력해 주세요.');
            $("#q_blogurl").focus();
            return;
        } else {
            setBlogContents(q_link);
        }
     } else {
        getBlogContentsList();
     }
}
function getBlogContentsList(page,added_params) {
    if (page == 0) return;
    if (!page) {
        page = 1;
    }
    if ($("#q_blogid").val() == '') {
        alert("블로그 주소를 입력해 주세요.");
        return;
    }
    //var blog_url = $("#txtBlogHeader").text() + $("#q_blogid").val() + $("#txtBlogTail");

    if (_blogIsSubmit) {
        alert("처리중 입니다. 잠시만 기다리세요.");
        return;
    }

    if (page > parseInt($("#q_page").val(),10)) {
        $("#btnBlogNext").html('<span class="fa fa-spinner fa-spin" style="width:'+$("#btnBlogNext").width()+'px"></span>');
    } else if (page < parseInt($("#q_page").val(),10)) {
        $("#btnBlogPrev").html('<span class="fa fa-spinner fa-spin" style="width:'+$("#btnBlogPrev").width()+'px"></span>');
    }

    $("#q_page").val(page);
    _blogIsSubmit = true;
    var params = 'q_mode=get_blog_contents_list&q_portal='+$("[name=q_portal]:checked").val()+'&q_blogid='+$("#q_blogid").val()+'&q_scal='+$("#q_scal").val()+'&q_page='+page;
    if (added_params) {
        if (added_params.substring(0,1) != '&') params += '&';
        params += added_params;
    }

    $.ajax({
        type: "POST",
        cache: false,
        url: "/common/ajx_common.html",
        data: params,
        success: function(html) {
            $("#divBlogContentsList").html(html);
            $("[id^=spanBlogContentsTitle_]").ellipsis();
            $('#divModalBlogContentsList').modal('show');
            _blogIsSubmit = false;
            return html;
        },
        error: function () {
            alert('예기치 못한 오류로 인해 실패했습니다.');
            _blogIsSubmit = false;
        }
    });
}
function setBlogContents(q_link) {
    if (typeof q_link == 'undefined' || q_link == '') {
        q_link = $("#listBlog [id^=q_link_]:checked").val();

        if (!q_link) {
            alert('블로그 컨텐츠를 선택하세요.');
            return;
        }
        $("#btnSetBlogContents").html('<span class="fa fa-spinner fa-spin" style="width:' + $("#btnSetBlogContents").width() + 'px"></span>');
        document.location.href = '/inbox/insert.html?ref_blog_url=' + encodeURIComponent(q_link);
    } else {
        $("#btnSetBlogContents").html('<span class="fa fa-spinner fa-spin" style="width:' + $("#btnSetBlogContents").width() + 'px"></span>');
        document.location.href = '/inbox/insert.html?ref_blog_url=' + encodeURIComponent(q_link);
        //alert('블로그 주소를 읽을 수 없습니다.');
    }
}
function doChangeBlogSelectType(select_type) {
    if (select_type == 'url') {
        $("#top_blog_select_id").hide();
        $("#top_blog_select_url").show();
    } else {
        $("#top_blog_select_url").hide();
        $("#top_blog_select_id").show();
    }

}
</script>

<div class="modal fade" id="divModalBlogForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="z-index:100001">
  <div class="modal-dialog" style="width:520px">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">블로그 찾기</h4>
      </div>
      <div class="modal-body">
        <dl class="blog_select">
          <dt>1. 레시피가 있는 블로그를 선택해 주세요.</dt>
          <dd>
            <span class="blog_t1"><label class="radio-inline"><input type="radio" name="q_portal" value="Naver" id="q_portal_Naver" onclick="doChangePortal(this.value)" aria-label="" checked="checked">네이버</label></span>
            <span class="blog_t2"><label class="radio-inline"><input type="radio" name="q_portal" value="Daum" id="q_portal_Daum" onclick="doChangePortal(this.value)" aria-label="">다음</label></span>
            <span class="blog_t3"><label class="radio-inline"><input type="radio" name="q_portal" value="Tistory" id="q_portal_Tistory" onclick="doChangePortal(this.value)" aria-label="">티스토리</label></span>
          </dd>
        </dl>
        <dl class="blog_select">
          <dt>2. 글을 가져올 방식을 선택해 주세요.</dt>
          <dd>
            <div style="padding-bottom:7px"><span style="color:#666;"><label class="radio-inline"><input type="radio" name="q_blog_select_type" value="id" id="q_blog_select_type_id" onclick="doChangeBlogSelectType(this.value)" aria-label="">블로그 ID를 입력하여 글 선택하기</label></span></div>
            <div><span style="color:#666"><label class="radio-inline"><input type="radio" name="q_blog_select_type" value="url" id="q_blog_select_type_url" onclick="doChangeBlogSelectType(this.value)" aria-label="">블로그 글 URL을 입력하여 내용 가져오기</label></span></div>
          </dd>
        </dl>
        <dl id="top_blog_select_id" class="blog_select" style="display:none">
          <dt>3. 블로그 ID를 입력해 주세요.</dt>
          <dd><span id="txtBlogHeader">http://blog.naver.com/</span> <input type="text" name="q_blogid" id="q_blogid" value="" class="form-control" placeholder="" style="width:200px">
              <span id="txtBlogTail"></span>
          </dd>
        </dl>
        <dl id="top_blog_select_url" class="blog_select" style="display:none">
          <dt>3. 블로그 글 URL을 입력해 주세요.</dt>
          <dd>
            <input type="text" name="q_blogurl" id="q_blogurl" value="" class="form-control" placeholder="" style="width:400px">
            <div><span>(블로그 글 URL은 네이버/다음/티스토리 만 가능합니다)</span></div>
          </dd>
        </dl>
            </div>
      <div class="modal-footer">
        <button type="button" id="btnBlogContentsList" onclick="doBlogSelect()" class="btn-lg btn-primary" rel="popover_blog">조회</button>
        <button type="button" class="btn-lg btn-default" data-dismiss="modal">취소</button>
        <input type="hidden" name="q_page" id="q_page" value="1">
        <input type="hidden" name="q_scal" id="q_scal" value="10">
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<div class="modal fade" id="divModalBlogContentsList" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="z-index:100002">
  <div class="modal-dialog" style="width:520px">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">글을 선택하세요</h4>
      </div>
      <div class="modal-body" id="divBlogContentsList">

      </div>
      <div class="modal-footer">

      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" id="divBrowserGuideModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="z-index:100001">
  <div class="modal-dialog" style="width:820px">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">브라우저 업데이트 안내</h4>
      </div>
      <div class="modal-body">
        <!--
            <h3>Internet Explorer 10 이하 버전을 사용중이시군요!</h3>
            <p></p>
            <h4 style="color:#de4830">레시피 등록은,</h4>
            <h4 style="color:#de4830">IE 11이상 또는 크롬(Chrome) 브라우저 사용이 필수입니다.</h4>
        -->
            <div style="width:800px; height:560px; background:#fff; text-align:center;">
              <div sthyle="padding-top:5px;"><img src="http://recipe1.ezmember.co.kr/img/update_icon.gif" /></div>
              <div style="font-size:30px; font-weight:bold; color:#444; padding-top:25px;">브라우저를 최신버전으로 업그레이드 해주세요!</div>
              <div style="font-size:18px; color:#777; padding-top:25px;">레시피 등록을 위해서는 지금 사용하고 있는<br />브라우저 버전을 업그레이드 하거나 다른 웹 브라우저를 사용해야 됩니다.</div>
              <div style="font-size:18px; color:#777; padding-top:25px;">아래의 브라우저 사진을 클릭하여 업그레이드 하세요.</div>
              <div style="padding-top:30px;">
                <a href="https://www.google.com/chrome/" target="_blank" style="margin:0 4px;"><img src="http://recipe1.ezmember.co.kr/img/update_b_03.gif" alt="chrome"/ style="border:none;"></a>
                <a href="http://windows.microsoft.com/ko-kr/internet-explorer/download-ie" target="_blank" style="margin:0 4px;"><img src="http://recipe1.ezmember.co.kr/img/update_b_02.gif" alt="IE"/ style="border:none;"></a>
              </div>
            </div>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal --><link rel="stylesheet" type="text/css" href="http://recipe.ezmember.co.kr/static/css/jquery-ui-1.11.4_201507011.css" />
<style>
.tagit {
    margin: 0 0 0 0 !important;
    padding: 5px 8px!important;
    border-radius: 0!important;
}
</style>

<script>
var _RESOURCE_SAMPLE = [{"nm":"\ub3fc\uc9c0\uace0\uae30","amt":"300g"},{"nm":"\uc591\ubc30\ucd94","amt":"1\/2\uac1c"},{"nm":"\ucc39\uc300","amt":"2\ucef5"}];
var _SPICE_SAMPLE = [{"nm":"\ucc38\uae30\ub984","amt":"1T"},{"nm":"\uc18c\uae08","amt":"2t"},{"nm":"\uace0\ucd94\uac00\ub8e8","amt":"2T"}];
var _STEP_SAMPLE = ["\uc18c\uace0\uae30\ub294 \uae30\ub984\uae30\ub97c \ub5bc\uc5b4\ub0b4\uace0 \uc801\ub2f9\ud55c \ud06c\uae30\ub85c \uc370\uc5b4\uc8fc\uc138\uc694.","\uc900\ube44\ub41c \uc591\ub150\uc73c\ub85c \uba3c\uc800 \uace0\uae30\ub97c \uc870\ubb3c\uc870\ubb3c \uc7ac\uc6cc \ub461\ub2c8\ub2e4.","\uadf8 \uc0ac\uc774 \uc591\ud30c\uc640 \ubc84\uc12f, \ub300\ud30c\ub3c4 \uc370\uc5b4\uc11c \uc900\ube44\ud558\uc138\uc694.","\uace0\uae30\uac00 \ubc18\ucbe4 \uc775\uc5b4\uac08 \ub54c \uc591\ud30c\ub97c \ud568\uaed8 \ubcf6\uc544\uc694."];
var _MAIN_PHOTO_SIZE = {"input":{"width":250,"height":250},"import":{"width":250,"height":250},"edit":{"width":170,"height":170}};
var _VIDEO_PHOTO_SIZE = {"input":{"width":178,"height":100},"import":{"width":178,"height":100},"edit":{"width":178,"height":100}};
function handlePhotoFiles(e){
    var file_gubun = '';
    var str_num = '';
    if (/step/.test(e.target.id)) {
        file_gubun = 'step';
        str_num = e.target.id.replace('q_step_file_', '');
    } else if (/work/.test(e.target.id)) {
        file_gubun = 'work';
        str_num = e.target.id.replace('q_work_file_', '');
    } else if (/main/.test(e.target.id)) {
        file_gubun = 'main';
	} else if (/video/.test(e.target.id)) {
        file_gubun = 'video';
    } else if (/contents/.test(e.target.id)) {
		file_gubun = 'contents';
	}
    
    var reader = new FileReader;
    reader.onload = function(event){
        var img = new Image();
        img.src = reader.result;
        img.onload = function(){
        
            //iphone에서 찍은 사진(고용량)을 canvas에서 리사이징할 경우이미지가 틀어지는 현상이 있음
            var finalFile = reader.result;
            
            if (file_gubun == 'main') {
				$('#divMainPhotoBox').html('<div class="text-center" style="margin:50px 0 0 0"><span class="fa fa-spinner fa-spin fa-2x"></span></div>');
			} else if (file_gubun == 'video') {
                $('#divVideoPhotoBox').html('<div class="text-center" style="margin:30px 0 -30px 0;width:177px;height:100px"><span class="fa fa-spinner fa-spin fa-2x"></span></div>');
            } else if (file_gubun == 'step') {
                $('#divStepPhotoBox_' + str_num).html('<div class="text-center" style="margin:50px 0 0 0;width:160px"><span class="fa fa-spinner fa-spin fa-2x"></span></div>');
            } else if (file_gubun == 'work') {
                $('#divWorkPhotoBox_' + str_num).html('<div class="text-center" style="margin:50px 0 0 0"><span class="fa fa-spinner fa-spin fa-2x"></span></div>');
            }
            $.ajax({
                beforeSend: function(xhr){
                    xhr.setRequestHeader('Content-Type', 'canvas/upload');
                },
                type: "POST",
                url: "/common/upload_photo.html?file_gubun=" + file_gubun + "&id=" + str_num,
                data: "canvasData=" + finalFile,
                dataType: "json",
                cache: "false",
                processData: false,
                success: function(json){
                    if (json['result'] == "SUCCESS") {
                        switch (json['file_gubun']) {
                            case 'step':
                                setStepPhoto('1', json['url'], '', json['id']);
                                break;
                            case 'main':
                                setMainPhoto('1', json['url'], '');
                                break;
							case 'video':
                                setVideoPhoto('1', json['url'], '');
                                break;
                            case 'work':
                                setWorkPhoto('1', json['url'], '', json['id']);
                                break;
							case 'contents':
                                setContentsPhoto('1', json);
                                break;
                        }
                        
                    }
                    else {
                        alert("처리에 실패하였습니다.");
                    }
                },
                error: function(){
                    alert('오류가 발생하였습니다.');
                }
                
            });
        }
    }
    reader.readAsDataURL(e.target.files[0]);
}

function setMainPhoto(is_temp, url, org_url){
    $("#main_photo").val(url);
	var w = _MAIN_PHOTO_SIZE[$("#cok_reg_type").val()]['width'];
	var h = _MAIN_PHOTO_SIZE[$("#cok_reg_type").val()]['height']
    if (is_temp != '') {
        $("#new_main_photo").val('1');
        $("#divMainPhotoBox").html('<div id="divMainPhotoHolder" style="position:relative;width:'+w+'px;height:'+h+'px"><img id="upload_main_image" onclick="browseMainFile()" src="/common/ajx_common.html?q_mode=get_image&axis=fixed&max_w='+w+'&max_h='+h+'&is_temp=' + is_temp + '&q_url=' + encodeURIComponent(url) + '" border="0" style="cursor:pointer;width:'+w+'px;height:'+h+'px;"><a id="btnDelMainPhoto" href="javascript:delMainPhoto()" class="pic_del" style="display: none;"></a></div>');
    }
    else {
        $("#divMainPhotoBox").html('<div id="divMainPhotoHolder" style="position:relative;width:'+w+'px;height:'+h+'px"><img id="upload_main_image" onclick="browseMainFile()" src="/common/ajx_common.html?q_mode=get_image&axis=fixed&max_w='+w+'&max_h='+h+'&is_temp=' + is_temp + '&q_url=' + encodeURIComponent(url) + '" border="0" style="cursor:pointer;width:'+w+'px;height:'+h+'px;"><a id="btnDelMainPhoto" href="javascript:delMainPhoto()" class="pic_del" style="display: none;"></a></div>');
    }
    /*
    $("#btnDelMainPhoto").css({
        'left': $("#divMainPhotoUpload").position().left + $("#divMainPhotoUpload").width() - $("#btnDelMainPhoto").width()
    });
    */
    $("#divMainPhotoHolder").mouseover(function(){
        $("#divMainPhotoBox").attr('is_over', '1');
        $("#btnDelMainPhoto").show();
    }).mouseout(function(){
        $("#divMainPhotoBox").attr('is_over', '0');
        setTimeout(function(){
            if ($("#divMainPhotoBox").attr('is_over') == '0') {
                $("#btnDelMainPhoto").hide();
            }
        }, 200);
    });
}

function setVideoPhoto(is_temp, url, org_url){
    $("#video_photo").val(url);
    var w = _VIDEO_PHOTO_SIZE[$("#cok_reg_type").val()]['width'];
    var h = _VIDEO_PHOTO_SIZE[$("#cok_reg_type").val()]['height']
    if (is_temp != '') {
        $("#new_video_photo").val('1');
        $("#divVideoPhotoBox").html('<div id="divVideoPhotoHolder" style="position:relative;width:'+w+'px;height:'+h+'px"><img id="upload_video_image" src="/common/ajx_common.html?q_mode=get_image&axis=fixed&max_w='+w+'&max_h='+h+'&is_temp=' + is_temp + '&q_url=' + encodeURIComponent(url) + '" border="0" style="width:'+w+'px;height:'+h+'px;"></div>');
    }
    else {
        $("#divVideoPhotoBox").html('<div id="divVideoPhotoHolder" style="position:relative;width:'+w+'px;height:'+h+'px"><img id="upload_video_image" src="/common/ajx_common.html?q_mode=get_image&axis=fixed&max_w='+w+'&max_h='+h+'&is_temp=' + is_temp + '&q_url=' + encodeURIComponent(url) + '" border="0" style="width:'+w+'px;height:'+h+'px;"></div>');
    }
}

function setStepPhoto(is_temp, url, org_url, str_num){
    $("#step_photo_" + str_num).val(url);
    if (is_temp != '') {
        $("#new_step_photo_" + str_num).val('1');
        $("#divStepPhotoBox_" + str_num).html('<div id="divStepPhotoHolder_' + str_num + '" style="position:relative;"><img id="upload_step_image_' + str_num + '" onclick="browseStepFile(' + str_num + ')" src="/common/ajx_common.html?q_mode=get_image&axis=fixed&max_w=160&max_h=160&is_temp=' + is_temp + '&q_url=' + encodeURIComponent(url) + '" border="0" style="cursor:pointer;width:160px;height:160px;"><a id="btnDelStepPhoto_' + str_num + '" class="pic_del" href="javascript:delStepPhoto(' + str_num + ')" style="display: none;"></a></div>');
    }
    else {
        $("#divStepPhotoBox_" + str_num).html('<div id="divStepPhotoHolder_' + str_num + '" style="position:relative;"><img id="upload_step_image_' + str_num + '" onclick="browseStepFile(' + str_num + ')" src="/common/ajx_common.html?q_mode=get_image&axis=fixed&max_w=160&max_h=160&is_temp=' + is_temp + '&q_url=' + encodeURIComponent(url) + '" border="0" style="cursor:pointer;width:160px;height:160px;"><a id="btnDelStepPhoto_' + str_num + '" class="pic_del" href="javascript:delStepPhoto(' + str_num + ')" style="display: none;"></a></div>');
    }
    $("#divStepPhotoHolder_" + str_num).mouseover(function(){
        $("#divStepPhotoBox_" + str_num).attr('is_over', '1');
        $("#btnDelStepPhoto_" + str_num).show();
    }).mouseout(function(){
        $("#divStepPhotoBox_" + str_num).attr('is_over', '0');
        setTimeout(function(){
            //$("#divStepPhotoBox_"+str_num).attr('is_over','0');
            if ($("#divStepPhotoBox_" + str_num).attr('is_over') == '0') {
                $("#btnDelStepPhoto_" + str_num).hide();
            }
        }, 200);
    });
}

function setWorkPhoto(is_temp, url, org_url, str_num){
    $("#work_photo_" + str_num).val(url);
    if (is_temp != '') {
        $("#new_work_photo_" + str_num).val('1');
        $("#divWorkPhotoBox_" + str_num).html('<div id="divWorkPhotoHolder_' + str_num + '"><img id="upload_work_image_' + str_num + '" onclick="browseWorkFile(' + str_num + ')" src="/common/ajx_common.html?q_mode=get_image&axis=fixed&max_w=140&max_h=140&is_temp=' + is_temp + '&q_url=' + encodeURIComponent(url) + '" border="0" style="cursor:pointer;width:140px;height:140px;"><a id="btnDelWorkPhoto_' + str_num + '" class="pic_del" href="javascript:delWorkPhoto(' + str_num + ')" style="display: none;"></a></div>');
    } else {        
        $("#divWorkPhotoBox_" + str_num).html('<div id="divWorkPhotoHolder_' + str_num + '"><img id="upload_work_image_' + str_num + '" onclick="browseWorkFile(' + str_num + ')" src="/common/ajx_common.html?q_mode=get_image&axis=fixed&max_w=140&max_h=140&is_temp=' + is_temp + '&q_url=' + encodeURIComponent(url) + '" border="0" style="cursor:pointer;width:140px;height:140px;"><a id="btnDelWorkPhoto_' + str_num + '" class="pic_del" href="javascript:delWorkPhoto(' + str_num + ')" style="display: none;"></a></div>');
    }
    
    $("#divWorkPhotoHolder_" + str_num).mouseover(function(){
        $("#divWorkPhotoBox_" + str_num).attr('is_over', '1');
        $("#btnDelWorkPhoto_" + str_num).show();
    }).mouseout(function(){
        $("#divWorkPhotoBox_" + str_num).attr('is_over', '0');
        setTimeout(function(){
            //$("#divWorkPhotoBox_"+str_num).attr('is_over','0');
            if ($("#divWorkPhotoBox_" + str_num).attr('is_over') == '0') {
                $("#btnDelWorkPhoto_" + str_num).hide();
            }
        }, 200);
    });
}

function setContentsPhoto(is_temp, json) {
	var imgSrc = '<div><img src="' + json['url'] + '" /></div>';
    oEditors.getById["boa_tx_content"].exec("PASTE_HTML", [imgSrc]);
	
	var base_width = 460;
	var url = json['url'];
	var w = json['width'];
	var h = json['height'];
    
    if (w > 200 && h > 200) {
		_BLOG_IMAGE_LIST.push({'url':url,'width':w,'height':h,'is_temp':is_temp});
		if (!$("#divBlogImageList").find('li[org_url="'+url+'"]').length) {
			var idx = $("#divBlogImageList").find('li').length;
			if (!idx) idx = 0;
			idx++;
			str = '<li><img id="imgBlog_'+(idx)+'" src="/common/ajx_common.html?q_mode=get_image&axis=fixed&max_w=83&max_h=83&is_temp='+is_temp+'&q_url='+encodeURIComponent(url)+'" org_src="'+url+'" org_width="'+w+'" org_height="'+h+'"></li>';
            $(str).appendTo('#divBlogImageList');
		}
		initDragDrop();
    }
}



function setCategory(){
    var json_category = [];
    for (var i = 1; i <= 4; i++) {
        var id = $("[id^=spanCategory_" + i + "_]").filter('.label-success').prop('id');
        var cate_code = id.replace('spanCategory_' + i + '_', '');
        $("#cok_sq_category_" + i).val(cate_code);
    }
    closeCategory();
}

function closeCategory(){
    $("#btnAllCategory").popover('hide');
}

function toggleCategory(cate1, cate2){
    $("[id^=spanCategory_" + cate1 + "_]").each(function(){
        if ($(this).prop('id') == "spanCategory_" + cate1 + "_" + cate2) {
            if (!$(this).hasClass('label')) {
                $(this).addClass('label label-success');
            }
        }
        else {
            $(this).removeClass('label label-success');
        }
    });
}

function chkStar(val){
    var var_width = ((val * 20) - val) + 'px';
    $('#div_star').animate({
        width: var_width
    });
    $('#mac_tg_star').val(val);
}

function addResource(prev_step, init_json){
    var step = 0;
    
    $("#divResourceArea [id^=liResource_]").each(function(){
        var tmp = $(this).prop('id').replace('liResource_', '');
        var tmp_step = parseInt(tmp, 10);
        step = Math.max(step, tmp_step);
    });
    step++;
    //alert(step);
	var w = ($("#cok_reg_type").val() == 'edit') ? 190 : 300; 
	var str = '<li id="liResource_'+step+'"><a href="#" class="btn-lineup"></a>';
	str += '<input type="text" name="cok_resource_nm[]" id="cok_resource_nm_'+step+'" class="form-control" style="width:'+w+'px;">';
	str += '<input type="text" name="cok_resource_amt[]" id="cok_resource_amt_'+step+'" class="form-control" style="width:'+w+'px;">';
	str += '<a id="btnResourceDel_'+step+'" href="javascript:delResource('+step+')" class="btn-del" style="display:none"></a></li>';
    
    if (typeof prev_step == 'undefined' || prev_step === null || prev_step == 0) {
        $(str).appendTo('#divResourceArea');
    }
    else {
        $(str).insertAfter("#liResource_" + prev_step);
    }
    
    if (typeof init_json !== 'undefined' && init_json !== null && init_json['nm']) {
        $("#divResourceArea [id=cok_resource_nm_" + step + "]").val(init_json['nm']);
    } else {
		$("#divResourceArea [id=cok_resource_nm_" + step + "]").attr('placeholder','예) '+_RESOURCE_SAMPLE[(step-1)%_RESOURCE_SAMPLE.length]['nm']);
	}
    if (typeof init_json !== 'undefined' && init_json !== null && init_json['amt']) {
        $("#divResourceArea [id=cok_resource_amt_" + step + "]").val(init_json['amt']);
    } else {
		$("#divResourceArea [id=cok_resource_amt_" + step + "]").attr('placeholder','예) '+_RESOURCE_SAMPLE[(step-1)%_RESOURCE_SAMPLE.length]['amt']);
	}
    
    $("#divResourceArea [id=liResource_" + step + "]").mouseover(function(){
        $(this).find('.btn-del').show();
    }).mouseout(function(){
        $(this).find('.btn-del').hide();
    });
	
	$("#divResourceArea").sortable({
        handle: $('.btn-lineup')
    });
	//$( "ul, li" ).disableSelection();
}
function delResource(step) {
	$("#divResourceArea [id=liResource_"+step+"]").fadeOut(200,function() {
		$(this).remove();
	});
}

function addSpice(prev_step, init_json){
    var step = 0;
    
    $("#divSpiceArea [id^=liSpice_]").each(function(){
        var tmp = $(this).prop('id').replace('liSpice_', '');
        var tmp_step = parseInt(tmp, 10);
        step = Math.max(step, tmp_step);
    });
    step++;
    //alert(step);
	var w = ($("#cok_reg_type").val() == 'edit') ? 190 : 300; 
    var str = '<li id="liSpice_'+step+'"><a href="#" class="btn-lineup"></a>';
    str += '<input type="text" name="cok_spice_nm[]" id="cok_spice_nm_'+step+'" class="form-control" style="width:'+w+'px;">';
    str += '<input type="text" name="cok_spice_amt[]" id="cok_spice_amt_'+step+'" class="form-control" style="width:'+w+'px;">';
    str += '<a id="btnSpiceDel_'+step+'" href="javascript:delSpice('+step+')" class="btn-del" style="display:none"></a></li>';
    
    if (typeof prev_step == 'undefined' || prev_step === null || prev_step == 0) {
        $(str).appendTo('#divSpiceArea');
    }
    else {
        $(str).insertAfter("#liSpice_" + prev_step);
    }
    
    if (typeof init_json !== 'undefined' && init_json !== null && init_json['nm']) {
        $("#divSpiceArea [id=cok_spice_nm_" + step + "]").val(init_json['nm']);
    } else {
        $("#divSpiceArea [id=cok_spice_nm_" + step + "]").attr('placeholder','예) '+_SPICE_SAMPLE[(step-1)%_SPICE_SAMPLE.length]['nm']);
    }
    if (typeof init_json !== 'undefined' && init_json !== null && init_json['amt']) {
        $("#divSpiceArea [id=cok_spice_amt_" + step + "]").val(init_json['amt']);
    } else {
        $("#divSpiceArea [id=cok_spice_amt_" + step + "]").attr('placeholder','예) '+_SPICE_SAMPLE[(step-1)%_SPICE_SAMPLE.length]['amt']);
    }
    
    $("#divSpiceArea [id=liSpice_" + step + "]").mouseover(function(){
        $(this).find('.btn-del').show();
    }).mouseout(function(){
        $(this).find('.btn-del').hide();
    });
	
	$("#divSpiceArea").sortable({
        handle: $('.btn-lineup')
    });
	//$( "ul, li" ).disableSelection();
}
function delSpice(step) {
    $("#divSpiceArea [id=liSpice_"+step+"]").fadeOut(200,function() {
        $(this).remove();
    });
}

function addStep(prev_step, init_json){
    var step = 0;
    //var obj_step = $(obj).parent().prop('id').replace('divStepBtn_','');
    $("#divStepArea [id^=divStepItem_]").each(function(){
        var tmp = $(this).prop('id').replace('divStepItem_', '');
        var tmp_step = parseInt(tmp, 10);
        step = Math.max(step, tmp_step);
    });
    step++;
    //alert(step);
    var str = $("#divStepTemplate").html().replace(/__STEP/g, step);
    var str = str.replace(/_STEP/g, '_' + step);
    
	
    if (typeof prev_step == 'undefined' || prev_step === null || prev_step == 0) {
        $(str).appendTo('#divStepArea');
    }
    else {
        $(str).insertAfter("#divStepItem_" + prev_step);
    }
    
    if (typeof init_json !== 'undefined' && init_json !== null && init_json['text']) {
        $("#divStepArea [id=step_text_" + step + "]").val(init_json['text']);
    } else {
		$("#divStepArea [id=step_text_" + step + "]").attr('placeholder','예) '+_STEP_SAMPLE[(step-1)%_STEP_SAMPLE.length]);
	}
    if (typeof init_json !== 'undefined' && init_json !== null && init_json['step_no']) {
        $("#divStepArea [id=step_no_" + step + "]").val(init_json['step_no']);
    }
    if (typeof init_json !== 'undefined' && init_json !== null && init_json['photo']) {
        setStepPhoto('', init_json['photo'][0], init_json['photo'][0], step);
    }
    
    $("#divStepArea [id=divStepItem_" + step + "]").mouseover(function(){
        $(this).find('.step_btn').show();
    }).mouseout(function(){
        $(this).find('.step_btn').hide();
    });
    
    $("#divStepArea [id=divStepItem_" + step + "] .moveUp").click(function(){
		if ($(this).parents('.step').prevAll('.step').length !== 0) {
			$(this).parents('.step').insertBefore($(this).parents('.step').prev());
			remakeStepNumber();
		}
    });
    $("#divStepArea [id=divStepItem_" + step + "] .moveDown").click(function(){
		if ($(this).parents('.step').nextAll('.step').length !== 0) {
			$(this).parents('.step').insertAfter($(this).parents('.step').next());
			remakeStepNumber();
		}
    });        
	$("#divStepArea").sortable({
        handle: ($("#cok_reg_type").val() == 'input') ? $(".cont_tit2_1") : $(".cont_tit2"),
        stop: function(event,ui) {
            remakeStepNumber();
        }
    });
	
	$("#divStepArea [id=divStepNum_" + step + "]").tooltip({
        'placement': 'top',
        'container': $('.recipe_regi'),
        'title': '드래그하면 순서를 변경할 수 있습니다.'
    });
	
	if ($("#cok_reg_type").val() == 'edit') {
		$("#divStepItem_"+step).droppable({
            accept: "#divLeftContent img, #divLeftContent span",
			drop: function( event, ui ) {
				//var src = ui.draggable.attr('src');
				var src = ($(ui.draggable).prop('tagName') == 'IMG') ? ui.draggable.attr('src') : ui.draggable.attr('img_src');
                var target_step = $(this).prop('id').replace('divStepItem_','');
				setStepPhoto('1',src,src,target_step);
            }
        });
	}
	
    bindEvent(document.getElementById("q_step_file_" + step), 'change', handlePhotoFiles);
    
    remakeStepNumber();
}

function bindEvent(el, eventName, eventHandler){
	
    if (el.addEventListener) {
        el.addEventListener(eventName, eventHandler, false);
    }
    else 
        if (el.attachEvent) {
            el.attachEvent(eventName, eventHandler);
        }
      
}

function remakeStepNumber(){
    $("#divStepArea [id^=divStepItem_]").each(function(idx, obj){
        var step = $(this).prop('id').replace('divStepItem_', '');
        $("#divStepArea [id=divStepNum_" + step + "]").html('Step' + (idx + 1));
    });
}

function browseContentsFile() {
	var editor=oEditors.getById["boa_tx_content"];
    if (editor) {
        $("#q_contents_file").click();
    } else {
        alert('글쓰기 폼이 준비되지 않았습니다. 다시 시도해 주세요.');
    }
}

function browseMainFile(){
    $("#q_main_file").click();
}

function browseVideoFile(){
    $("#q_video_file").click();
}    

function browseStepFile(step){
    $("#divStepArea [id=q_step_file_" + step + "]").click();
}

function browseWorkFile(num){
    $("#divWorkArea [id=q_work_file_" + num + "]").click();
}

function delStep(step){
	$("#divStepArea [id=divStepItem_" + step + "]").fadeOut(200,function() {
		$("#divStepArea [id=divStepItem_" + step + "]").remove();
		remakeStepNumber();
	});
}
function adjustStep(step) {
    adjustText('step_text_'+step);
}
function adjustText(id) {
    var contents = $('#'+id).val();
    var temp = contents.split('\n');
    var arr_str = [];
    for (var i=0; i<temp.length; i++) {
        if ($.trim(temp[i]) != '') {
            arr_str.push($.trim(temp[i]));
        }
    }
    $('#'+id).val(arr_str.join(' '));
}
function delMainPhoto(){
    //alert(step);
    $("#main_photo").val('');
    $("#new_main_photo").val('');
    $("#del_main_photo").val('1');
	if ($("#cok_reg_type").val() == 'edit') {
		$("#divMainPhotoBox").html('<img id="mainPhotoHolder" onclick="browseMainFile()" src="http://recipe1.ezmember.co.kr/img/pic_none.gif" style="width: 170px; height: 170px; cursor:pointer">');
	} else {
		$("#divMainPhotoBox").html('<img id="mainPhotoHolder" onclick="browseMainFile()" src="http://recipe1.ezmember.co.kr/img/pic_none4.gif" style="width: 250px; height: 250px; cursor:pointer">');
	}
}

function delVideoPhoto(){
    //alert(step);
    $("#video_photo").val('');
    $("#new_video_photo").val('');
    $("#del_video_photo").val('1');
	$("#cok_video_src").val('');
    if ($("#cok_reg_type").val() == 'edit') {
        $("#divVideoPhotoBox").html('<img id="videoPhotoHolder" src="http://recipe1.ezmember.co.kr/img/pic_none5.gif" style="width: 178px; height: 100px;">');
    } else {
        $("#divVideoPhotoBox").html('<img id="videoPhotoHolder" src="http://recipe1.ezmember.co.kr/img/pic_none5.gif" style="width: 178px; height: 100px;">');
    }
}

function delStepPhoto(step){
    //alert(step);
    $("#step_photo_" + step).val('');
    $("#new_step_photo_" + step).val('');
    $("#del_step_photo_" + step).val('1');
    //$("#divStepArea [id=divStepPhotoBox_"+step+"]").html('<img id="stepPhotoHolder_'+step+'" onclick="browseStepFile('+step+')" data-src="holder.js/160x160/size:40/text:+" src="data:image/png;base64," alt="No Image" style="width: 160px; height: 160px; cursor:pointer">');
    $("#divStepArea [id=divStepPhotoBox_" + step + "]").html('<img id="stepPhotoHolder_' + step + '" onclick="browseStepFile(' + step + ')" src="http://recipe1.ezmember.co.kr/img/pic_none2.gif" alt="No Image" style="width: 160px; height: 160px; cursor:pointer">');
}

function delWorkPhoto(step){
    $("#work_photo_" + step).val('');
    $("#new_work_photo_" + step).val('');
    $("#del_work_photo_" + step).val('1');
    $("#divWorkArea [id=divWorkPhotoBox_" + step + "]").html('<img id="workPhotoHolder_' + step + '" onclick="browseWorkFile(' + step + ')" src="http://recipe1.ezmember.co.kr/img/pic_none3.gif" alt="No Image" style="width: 140px; height: 140px; cursor:pointer">');
}  
var isGettingThumb = false; 
function getVideoThumb(url) {
    $('#divVideoPhotoBox').html('<div class="text-center" style="margin:30px 0 -30px 0;width:177px;height:100px"><span class="fa fa-spinner fa-spin fa-2x"></span></div>');
	isGettingThumb = true;
    $.ajax({
        type: "POST",
        url: "/common/ajx_common.html",
        data: "q_mode=get_video_thumb&url="+encodeURIComponent(url),
        dataType: "json",
        success: function(json) {
            if (json['thumb_url']) {
                setVideoPhoto('1', json['thumb_url'], json['thumb_url']);
				$("#cok_video_src").val(json['video_src']);
				if ($("#cok_video_url").val().indexOf('MultimediaFLVPlayer.nhn') > -1) {
					$("#cok_video_url").val(json['video_src']);
				}
				$("#cok_video_url").attr('prev_url',$("#cok_video_url").val());
				
				if ($("#main_photo").val() == '') {
					$.ajax({
				        type: "POST",
				        url: "/common/ajx_common.html",
				        data: "q_mode=copy_thumb&from_url="+encodeURIComponent(json['thumb_url']),
				        dataType: "json",
				        success: function(json) {
				            if (json['to_url']) {
								setMainPhoto('1', json['to_url'], '');
							}
						},
						error: function () {
				            alert("대표사진 설정 실패.");
				        }
					});
				}
				
            } else {
                alert("유효하지 않은 동영상 주소입니다.");
                delVideoPhoto();
            }
			isGettingThumb = false;
        },
        error: function () {
            alert("썸네일 가져오기 실패.");
            delVideoPhoto();
			isGettingThumb = false;
        }
    });
}

function showAddRecipeDialog() {
    var added_recipes = '';
    $("[name='rel_cok_sq_board[]']").each(function() {
        if (added_recipes != '' && $(this).val() != '') added_recipes += ',';
        if ($(this).val() != '') added_recipes += $(this).val();
    }); 
    EAD.showDialog({'title':'레시피 추가','url':'/admin/recipe/add_recipe.html?srh[sort]=recommend_point_desc&srh[scal]=100&added_recipes='+added_recipes,'modal':false,'width':1400,'height':900,'method':'post'});
} 

window.onbeforeunload = function() {
    
    if (!isSubmit)
        return "작성된 레시피를 저장하지 않고 이동하시겠습니까?";
}

</script>
<form name="insFrm" id="insFrm" method="post">
<input type="hidden" name="q_mode" id="q_mode" value="save">
<input type="hidden" name="cok_sq_board" id="cok_sq_board" value=""> <input type="hidden" name="newUploadFiles" value="">
<input type="hidden" name="cok_reg_id" id="cok_reg_id" value="35720182" />
<input type="hidden" name="cok_reg_type" id="cok_reg_type" value="input">
<input type="hidden" name="ref_blog_url" id="ref_blog_url" value="">
<input type="hidden" name="goods_no" id="goods_no" value=""> 
<link rel="stylesheet" type="text/css" href="http://recipe.ezmember.co.kr/static/css/jquery.tagit.css" /><style>
.note-editor .note-dropzone { opacity: 0 !important; }
ul.tagit {
    width : 620px;
    vertical-align : middle;

}
ul.tagit input[type="text"] {
    width: 100%;
    height: 30px;
}
</style>

<script>
$(document).ready(function() {
    bindEvent(document.getElementById("q_main_file"), 'change', handlePhotoFiles);
	bindEvent(document.getElementById("q_video_file"), 'change', handlePhotoFiles);
    for (var i=1; i<=4; i++) {
        bindEvent(document.getElementById("q_work_file_"+i), 'change', handlePhotoFiles);
    }

    addResource();
addResource();
addResource();
addSpice();
addSpice();
addSpice();
addStep();
	
        	//동영상 사진 관련 /////////////////////////////////////
    $("#cok_video_url").blur(function() {
        if ($(this).val() != '' && $(this).val() != $(this).attr('prev_url')) {
            if ($(this).val().indexOf('http://') > -1 || $(this).val().indexOf('https://') > -1) {
                getVideoThumb($.trim($(this).val()));
            } else {
                delVideoPhoto();
            }
        } else if ($.trim($(this).val()) == '' || ($(this).val().indexOf('http://') < 0 && $(this).val().indexOf('https://') < 0)) {
            delVideoPhoto();
        } 
    });
    $('#viewVideoDivModal').on('hidden.bs.modal', function () {
        $('#viewVideoModalCont').html('');
    });
	
    $(".btn-lineup").tooltip({
        'placement': 'top',
        'container': $('.recipe_regi'),
        'title': '드래그하면 순서를 변경할 수 있습니다.'
    });
	
	$("#divWorkArea").sortable({
        cursor: 'move',
        handle: $('.complete_pic'),
        helper: function(e, ui){
			/* 드래그 시, tr의 width 보존 */
            ui.children().each(function() {
                $(this).width($(this).width());
				$(this).height($(this).height());
            });
            return ui;
        },
		start: function(e, ui){
	    },
        stop: function(e,ui) {
        } 
    }).disableSelection();
});
var isSubmit = false;
function doSubmit(q_mode)
{
	if (isGettingThumb) {
        alert("동영상 썸네일을 가져오는 중입니다. 잠시만 기다리세요.");
        return;
    }
    $("#q_mode").val(q_mode);

    chkResult = validateRecipeForm(q_mode);
    if (!chkResult) {
        return isSubmit = false;
    }
    if (q_mode == 'save') {
        if (confirm("저장하시겠습니까?")) {
            isSubmit = true;
            $("#insFrm").submit();
        }
        else {
            isSubmit = false;
        }
    } else if (q_mode == 'save_preview') {
        if (confirm("미리보기를 하려면 저장하셔야 합니다. 저장하시겠습니까?")) {
            isSubmit = true;
            $("#insFrm").submit();
        }
        else {
            isSubmit = false;
        }
    } else if (q_mode == 'save_public') {
				var msg = '레시피 공개 후, 리스트 및 검색에 노출되는 데는 하루 정도의 시간이 소요됩니다.\n\n레시피를 공개하시겠습니까?';
		        if (confirm(msg)) {
            isSubmit = true;
            $("#insFrm").submit();
        }
        else {
            isSubmit = false;
        }
    } else if (q_mode == 'save_work' || q_mode == 'save_confirm') {
        isSubmit = true;
        $("#insFrm").submit();
    } else {
        isSubmit = false;
    }
}
function validateRecipeForm(q_mode) {
    if ($.trim($("#cok_title").val()) == '') {
        alert('레시피 제목을 입력해 주세요.');
        $("#cok_title").focus();
        return isSubmit = false;
    }

    if (q_mode != 'save') {
        if ($("#main_photo").val() == '') {
            alert('대표사진을 선택해 주세요.');
            return isSubmit = false;
        }
        if ($.trim($("#cok_intro").val()) == '') {
            alert('요리소개 내용을 입력해 주세요.');
            $("#cok_intro").focus();
            return isSubmit = false;
        }
        if ($("#cok_sq_category_1").val() == '') {
            alert('방법별 카테고리를 선택해 주세요.');
            $("#cok_sq_category_1").focus();
            return isSubmit = false;
        }
        if ($("#cok_sq_category_2").val() == '') {
            alert('상황별 카테고리를 선택해 주세요.');
            $("#cok_sq_category_2").focus();
            return isSubmit = false;
        }
        if ($("#cok_sq_category_3").val() == '') {
            alert('재료별 카테고리를 선택해 주세요.');
            $("#cok_sq_category_3").focus();
            return isSubmit = false;
        }
        if ($("#cok_sq_category_4").val() == '') {
            alert('종류별 카테고리를 선택해 주세요.');
            $("#cok_sq_category_4").focus();
            $("#btnAllCategory").trigger('click');

            return isSubmit = false;
        }
		if ($("#is_tv_recipe").prop('checked')) {
			
		} else {
			if ($("#cok_portion").val() == '') {
                alert('요리인원 선택해 주세요.');
                $("#cok_portion").focus();
                return isSubmit = false;
            }
			if ($("#cok_time").val() == '') {
                alert('요리시간을 선택해 주세요.');
                $("#cok_time").focus();
                return isSubmit = false;
            }
            if ($("#cok_degree").val() == '') {
                alert('난이도를 선택해 주세요.');
                $("#cok_degree").focus();
                return isSubmit = false;
            }
		}
	        
        var resource_cnt = 0;
        $("#divResourceArea [id^=liResource_]").each(function(i) {
            var step = $(this).prop('id').replace('liResource_','');
            if ($.trim($("#cok_resource_nm_" + step).val()) != '') {
                resource_cnt++;
            }
        });
        if (resource_cnt < 1) {
            alert('요리재료는 최소 1개 이상이어야 합니다.');
            $("#divResourceArea > li:last-child").find('input')[0].focus();
            return isSubmit = false;
        }

        var step_cnt = 0;
        var invalid_step = 0;
        $("#divStepArea [id^=divStepItem_]").each(function(i) {
            var step = $(this).prop('id').replace('divStepItem_','');
            if ($("#step_photo_"+step).val() != '' && $.trim($("#step_text_" + step).val()) == '') {
                alert("내용을 입력하세요.");
                $("#step_text_" + step).focus();
                invalid_step = step;
                return false;
            } else if ($.trim($("#step_text_" + step).val()) != '') {
                step_cnt++;
            }
        });
        if (invalid_step > 0) {
            return isSubmit = false;
        }
        if (step_cnt < 3) {
            alert('요리순서는 최소 3개 이상이어야 합니다.');
            $("#divStepArea textarea").last().focus();
            return isSubmit = false;
        }

    }
    return true;
}
function doDelete() {
    if (confirm("레시피를 삭제하시겠습니까?")) {
        isSubmit = true;
        $("#insFrm [name=q_mode]").val('delete');
        $("#insFrm").submit();
    }
    else {
        isSubmit = false;
    }
}
function addRecipe(json) {
    
    if (json.length) {
        var idx = 0;
        $("[id^=trRecipeRow_]").each (function() {
            var num = parseInt($(this).prop('id').replace('trRecipeRow_',''),10);
            idx = Math.max(idx,num);
        });
        
        var str = '';
        for (var i=0; i<json.length; i++) {
            
            if ($("[name='recipe_no[]'][value='"+json[i]['recipe_no']+"']").length) {
                alert('['+$("<div>").text(json[i]['recipe_nm']).html()+']는 이미 추가된 레시피 입니다.');
                continue;
            }
            
            idx++;
            
            str += '<tr id="trRecipeRow_'+idx+'" class="sortable_row">';
            str += '<input type="hidden" name="rel_cok_sq_board[]" value="'+json[i]['recipe_no']+'">';
            var title_width = $("#tableRecipeList").width() - 60 - 80 - 100 - 80 - 5;
            //alert(title_width);
            if (json[i]['recipe_no']) {
                str += '<td class="ac sortable_col" style="height:39px;width:120px;"><div class="sortable_row_class">' + json[i]['recipe_no'] + '</div></td>';
            } else {
                str += '<td class="sortable_col" style="height:39px;width:120px;"></td>';
            }
            if (json[i]['str_reg_type']) {
                str += '<td class="ac" style="height:39px;width:120px;">' + json[i]['str_reg_type'] + '</td>';
            } else {
                str += '<td class="ac" style="height:39px;width:120px;"></td>';
            }
            if (json[i]['thumb'] != '') {
                str += '<td class="ac" style="width:60px"><img src="' + json[i]['thumb'] + '" style="width:32px;height:32px"></td>';
            } else {
                str += '<td style="width:60px"></td>';
            }
            if (json[i]['recipe_no']) {
                str += '<td class="al" style="width:'+title_width+'px;"><a href="javascript:EAD.showDialog({\'title\':\'레시피 정보\',\'url\':\'/admin/recipe/view_recipe.html?cok_sq_board='+json[i]['recipe_no']+'\',\'width\':1300,\'modal\':false,\'fullsize\':true});">' + json[i]['recipe_nm'] + '</a></td>';
            } else {
                str += '<td class="al" style="width:'+title_width+'px;">' + json[i]['recipe_nm'] + '</td>';
            }
            str += '<td style="width:80px"><a href="javascript:delRecipe('+idx+');" role="button" class="btn btn-xs btn-default">삭제</td>';
            str += '</tr>';
        }
        $("#trNoRecipe").hide();
        $(str).appendTo("#tbodyRecipeList");
        
        $("#tbodyRecipeList").sortable({
            cursor: 'move',
            handle: $('.sortable_col'),
            helper: function(e, ui){
                /* 드래그 시, tr의 width 보존 */
                ui.children().each(function() {
                    $(this).width($(this).width());
                });
                return ui;
            },
            stop: function(e,ui) {
                
            } 
        }).disableSelection();
            
        $(".sortable_row_class").tooltip({
            'placement': 'top',
            'container': $('#tableRecipeList'),
            'title': '드래그하면 순서를 변경할 수 있습니다.'
        });
        
    }
    
}
function delRecipe(idx) {
    $("#trRecipeRow_"+idx).remove();
    if (!$("[id^=trRecipeRow_]").length) {
        $("#trNoRecipe").show();
    }
}
$(function() {

    var cache = {};
    $("#mySingleFieldTags").tagit({
        singleField: true,
        singleFieldNode: $('#mySingleFieldTags'),
        singleFieldDelimiter: ',',
        allowSpaces: true,
        preprocessTag : function(val) {
            return val.replace(",","").replace("#","");
        },
        autocomplete : {
            //minLength : 2,
            source: function( request, response ) {
                var term = request.term;
                if ( term in cache ) {
                    response( cache[ term ] );
                    return;
                }
                $.getJSON( "/util/autocomplete.html?q_mode=tag", request, function( data, status, xhr ) {
                    cache[ term ] = data;
                    response( data );
                });
            }
        }
    });
});

</script>

<div class="container recipe_regi">
    <div class="regi_center">
    <div class="regi_title">레시피 등록<a href="javascript:void(0)" id="btnRecipeInsertGuide"><img src="http://recipe1.ezmember.co.kr/img/btn_guide.gif" alt="레시피등록안내"></a></div>
    <div class="cont_box pad_l_60">
      <div id="divMainPhotoUpload" class="cont_pic2">
        <input type="hidden" name="main_photo" id="main_photo" value="">
        <input type="hidden" name="new_main_photo" id="new_main_photo" value="">
		<input type="hidden" name="del_main_photo" id="del_main_photo" value="">
        <div style="position:absolute;left:-3000px"><input type="file" name="q_main_file" id="q_main_file" file_gubun="main" accept="jpeg,png,gif" style="display:;width:0px;height:0px;font-size:0px;" text=""></div>
        <div id="divMainPhotoBox" is_over="0">
            <img id="mainPhotoHolder" onclick="browseMainFile()" src="http://recipe1.ezmember.co.kr/img/pic_none4.gif" style="width: 250px; height: 250px; cursor:pointer">
        </div>
      </div>
      <div class="cont_line"><p class="cont_tit4">레시피 제목</p><input type="text" name="cok_title" id="cok_title" value="" class="form-control" placeholder="예) 소고기 미역국 끓이기" style="width:610px; "></div>
      <div class="cont_line pad_b_25"><p class="cont_tit4">요리소개</p><textarea name="cok_intro" id="cok_intro" class="form-control step_cont" placeholder="이 레시피의 탄생배경을 적어주세요. 예) 남편의 생일을 맞아 소고기 미역국을 끓여봤어요. 어머니로부터 배운 미역국 레시피를 남편의 입맛에 맞게 고안했습니다." style="height:100px; width:610px; resize:none;"></textarea></div>
	  
	  <div class="cont_line pad_b_25"><p class="cont_tit4">동영상</p>
    	  <input type="hidden" name="video_photo" id="video_photo" value="">
          <input type="hidden" name="new_video_photo" id="new_video_photo" value="">
          <input type="hidden" name="del_video_photo" id="del_video_photo" value="">
		  <input type="hidden" name="cok_video_src" id="cok_video_src" value="">
		  <textarea name="cok_video_url" id="cok_video_url" class="form-control step_cont" prev_url="" placeholder="동영상이 있으면 주소를 입력하세요.(Youtube,네이버tvcast,다음tvpot 만 가능) 예)http://youtu.be/lA0Bxo3IZmM" style="height:100px; width:380px; resize:none;"></textarea>
		  <div style="position:absolute;left:-3000px"><input type="file" name="q_video_file" id="q_video_file" file_gubun="video" accept="jpeg,png,gif" style="display:;width:0px;height:0px;font-size:0px;" text=""></div>
		  <div id="divVideoPhotoBox" is_over="0" class="thumb_m">
    		  <img id="videoPhotoHolder" src="http://recipe1.ezmember.co.kr/img/pic_none5.gif" style="width: 177px; height: 100px;">
          </div>
	  </div>
	  
      <div class="cont_line"><p class="cont_tit4">카테고리</p>
        <select name="cok_sq_category_4" id="cok_sq_category_4"  text="종류별">
<option value="" >종류별</option><option value="63">밑반찬</option>
<option value="56">메인반찬</option>
<option value="54">국/탕</option>
<option value="55">찌개</option>
<option value="60">디저트</option>
<option value="53">면/만두</option>
<option value="52">밥/죽/떡</option>
<option value="61">퓨전</option>
<option value="57">김치/젓갈/장류</option>
<option value="58">양념/소스/잼</option>
<option value="65">양식</option>
<option value="64">샐러드</option>
<option value="68">스프</option>
<option value="66">빵</option>
<option value="69">과자</option>
<option value="59">차/음료/술</option>
<option value="62">기타</option>
</select>
        <select name="cok_sq_category_2" id="cok_sq_category_2"  text="상황별">
<option value="" >상황별</option><option value="12">일상</option>
<option value="18">초스피드</option>
<option value="13">손님접대</option>
<option value="19">술안주</option>
<option value="21">다이어트</option>
<option value="15">도시락</option>
<option value="43">영양식</option>
<option value="17">간식</option>
<option value="45">야식</option>
<option value="20">푸드스타일링</option>
<option value="46">해장</option>
<option value="44">명절</option>
<option value="14">이유식</option>
<option value="22">기타</option>
</select>
        <select name="cok_sq_category_1" id="cok_sq_category_1"  text="방법별">
<option value="" >방법별</option><option value="6">볶음</option>
<option value="1">끓이기</option>
<option value="7">부침</option>
<option value="36">조림</option>
<option value="41">무침</option>
<option value="42">비빔</option>
<option value="8">찜</option>
<option value="10">절임</option>
<option value="9">튀김</option>
<option value="38">삶기</option>
<option value="67">굽기</option>
<option value="39">데치기</option>
<option value="37">회</option>
<option value="11">기타</option>
</select>
        <select name="cok_sq_category_3" id="cok_sq_category_3"  text="재료별">
<option value="" >재료별</option><option value="70">소고기</option>
<option value="71">돼지고기</option>
<option value="72">닭고기</option>
<option value="23">육류</option>
<option value="28">채소류</option>
<option value="24">해물류</option>
<option value="50">달걀/유제품</option>
<option value="33">가공식품류</option>
<option value="47">쌀</option>
<option value="32">밀가루</option>
<option value="25">건어물류</option>
<option value="31">버섯류</option>
<option value="48">과일류</option>
<option value="27">콩/견과류</option>
<option value="26">곡류</option>
<option value="34">기타</option>
</select>
      </div>
      <div class="cont_line"><p class="cont_tit4">요리정보</p>
      인원
        <select name="cok_portion" id="cok_portion"  text="인원">
<option value="" >인원</option><option value="1">1인분</option>
<option value="2">2인분</option>
<option value="3">3인분</option>
<option value="4">4인분</option>
<option value="5">5인분</option>
<option value="6">6인분이상</option>
</select>
      <span class="pad_l_30">시간 </span>
        <select name="cok_time" id="cok_time"  text="요리시간">
<option value="" >시간</option><option value="5">5분이내</option>
<option value="10">10분이내</option>
<option value="15">15분이내</option>
<option value="30">30분이내</option>
<option value="60">60분이내</option>
<option value="90">90분이내</option>
<option value="120">2시간이내</option>
<option value="999">2시간이상</option>
</select>
      <span class="pad_l_30">난이도 </span>
        <select name="cok_degree" id="cok_degree"  text="난이도">
<option value="" >난이도</option><option value="1">아무나</option>
<option value="2">초급</option>
<option value="3">중급</option>
<option value="4">고급</option>
<option value="5">신의경지</option>
</select>
      </div>
    </div><!--/cont_box-->
    <div class="cont_box pad_l_60">
      <div class="mag_b_25">
        <p class="cont_tit4">재료</p>
        <ul id="divResourceArea"></ul>
        <div class="btn_add" style="padding:0 0 20px 160px; width:800px;"><button type="button" onclick="addResource()" class="btn btn-default"><span class="glyphicon glyphicon-plus-sign"></span>재료추가</button></div>
      </div>
      <div>
        <p class="cont_tit4">양념</p>
        <ul id="divSpiceArea"></ul>
        <div class="btn_add" style="padding:0 0 20px 160px; width:800px;"><button type="button" onclick="addSpice()" class="btn btn-default"><span class="glyphicon glyphicon-plus-sign"></span>양념추가</button></div>
      </div>
    </div><!--/cont_box-->
    <div class="cont_box pad_l_60">
      <p class="cont_tit3">요리순서</p>
      <div id="divStepArea"></div>
      <!-- step template -->
      <div id="divStepTemplate" style="display:none">
          <div id="divStepItem_STEP" class="step">
            <p id="divStepNum_STEP" class="cont_tit2_1" style="cursor:pointer">Step 1</p>
            <div id="divStepUpload_STEP" style="display:inline-block">
                <input type="hidden" name="step_no[]" id="step_no_STEP" value="">
                <input type="hidden" name="step_photo[]" id="step_photo_STEP" value="">
                <input type="hidden" name="new_step_photo[]" id="new_step_photo_STEP" value="">
                <input type="hidden" name="del_step_photo[]" id="del_step_photo_STEP" value="">
                <div style="position:absolute;left:-3000px"><input type="file" name="q_step_file_STEP" id="q_step_file_STEP" file_gubun="step" accept="jpeg,png,gif" style="display:;width:0px;height:0px;font-size:0px;" text=""></div>
                <div id="divStepPhotoBox_STEP" is_over="0">
                    <img id="stepPhotoHolder_STEP" onclick="browseStepFile(__STEP)" src="http://recipe1.ezmember.co.kr/img/pic_none2.gif" width="160" height="160" style="cursor:pointer">
                </div>
            </div>
            <div id="divStepText_STEP" style="display:inline-block">
                <textarea name="step_text[]" id="step_text_STEP" class="form-control step_cont" placeholder="" style="height:160px; width:430px; resize:none;"></textarea>
            </div>
            <div id="divStepBtn_STEP" class="step_btn" style="display:none">
                <a href="javascript:void(0)"><span class="glyphicon glyphicon-chevron-up moveUp"></span></a>
                <a href="javascript:void(0)"><span class="glyphicon glyphicon-chevron-down moveDown"></span></a>
                <a href="javascript:adjustStep(__STEP)"><b>맞춤</b></a>
                <a href="javascript:addStep(__STEP)"><span class="glyphicon glyphicon-plus"></span></a>
                <a href="javascript:delStep(__STEP)"><span class="glyphicon glyphicon-remove"></span></a>

            </div>
          </div>
      </div><!--/step template-->

      <div class="btn_add mag_b_25" style="padding:0 0 20px 180px; width:820px;"><button type="button" onclick="addStep()" class="btn btn-default"><span class="glyphicon glyphicon-plus-sign"></span>순서추가</button></div>


      <p class="cont_tit4">요리완성사진</p>
      <div id="divWorkArea" style="display:inline-block">
                <div id="divWorkUpload_1" class="complete_pic">
            <input type="hidden" name="work_photo[]" id="work_photo_1" value="">
            <input type="hidden" name="new_work_photo[]" id="new_work_photo_1" value="">
            <input type="hidden" name="del_work_photo[]" id="del_work_photo_1" value="">
            <div style="position:absolute;left:-3000px"><input type="file" name="q_work_file_1" id="q_work_file_1" file_gubun="work" accept="jpeg,png,gif" style="display:;width:0px;height:0px;font-size:0px;" text=""></div>
            <div id="divWorkPhotoBox_1" is_over="0">
                <a href="#" class="pic_del" style="display:none"></a>
                <img id="workPhotoHolder_1" onclick="browseWorkFile(1)" src="http://recipe1.ezmember.co.kr/img/pic_none3.gif" alt="No Image" style="width: 140px; height: 140px; cursor:pointer">
            </div>
        </div>
                <div id="divWorkUpload_2" class="complete_pic">
            <input type="hidden" name="work_photo[]" id="work_photo_2" value="">
            <input type="hidden" name="new_work_photo[]" id="new_work_photo_2" value="">
            <input type="hidden" name="del_work_photo[]" id="del_work_photo_2" value="">
            <div style="position:absolute;left:-3000px"><input type="file" name="q_work_file_2" id="q_work_file_2" file_gubun="work" accept="jpeg,png,gif" style="display:;width:0px;height:0px;font-size:0px;" text=""></div>
            <div id="divWorkPhotoBox_2" is_over="0">
                <a href="#" class="pic_del" style="display:none"></a>
                <img id="workPhotoHolder_2" onclick="browseWorkFile(2)" src="http://recipe1.ezmember.co.kr/img/pic_none3.gif" alt="No Image" style="width: 140px; height: 140px; cursor:pointer">
            </div>
        </div>
                <div id="divWorkUpload_3" class="complete_pic">
            <input type="hidden" name="work_photo[]" id="work_photo_3" value="">
            <input type="hidden" name="new_work_photo[]" id="new_work_photo_3" value="">
            <input type="hidden" name="del_work_photo[]" id="del_work_photo_3" value="">
            <div style="position:absolute;left:-3000px"><input type="file" name="q_work_file_3" id="q_work_file_3" file_gubun="work" accept="jpeg,png,gif" style="display:;width:0px;height:0px;font-size:0px;" text=""></div>
            <div id="divWorkPhotoBox_3" is_over="0">
                <a href="#" class="pic_del" style="display:none"></a>
                <img id="workPhotoHolder_3" onclick="browseWorkFile(3)" src="http://recipe1.ezmember.co.kr/img/pic_none3.gif" alt="No Image" style="width: 140px; height: 140px; cursor:pointer">
            </div>
        </div>
                <div id="divWorkUpload_4" class="complete_pic">
            <input type="hidden" name="work_photo[]" id="work_photo_4" value="">
            <input type="hidden" name="new_work_photo[]" id="new_work_photo_4" value="">
            <input type="hidden" name="del_work_photo[]" id="del_work_photo_4" value="">
            <div style="position:absolute;left:-3000px"><input type="file" name="q_work_file_4" id="q_work_file_4" file_gubun="work" accept="jpeg,png,gif" style="display:;width:0px;height:0px;font-size:0px;" text=""></div>
            <div id="divWorkPhotoBox_4" is_over="0">
                <a href="#" class="pic_del" style="display:none"></a>
                <img id="workPhotoHolder_4" onclick="browseWorkFile(4)" src="http://recipe1.ezmember.co.kr/img/pic_none3.gif" alt="No Image" style="width: 140px; height: 140px; cursor:pointer">
            </div>
        </div>
              </div>
    </div><!--/cont_box-->
    <div class="cont_box pad_l_60">
    <p class="cont_tit4">요리팁</p>
    <textarea name="cok_tip" id="cok_tip" class="form-control step_cont" placeholder="예) 고기요리에는 소금보다 설탕을 먼저 넣어야 단맛이 겉돌지 않고 육질이 부드러워요." style="height:120px; width:620px; resize:none;"></textarea>
    </div><!--/cont_box-->

    <div class="cont_box pad_l_60">
    <p class="cont_tit4">태그</p>
    <input type="hidden" name="boa_tx_tag" value="" id="mySingleFieldTags" style="width:100%">
    <span style="display:block; color:#666; margin-bottom:-8px;margin-left:140px">주재료, 목적, 효능, 대상 등을 태그로 남겨주세요.<em style="font-style:normal; color:#999; padding-left:8px;">예) 돼지고기, 다이어트, 비만, 칼슘, 감기예방, 이유식, 초간단</em></span>
    </div><!--/cont_box-->
	
	  </div><!--/regi_center-->
  <div class="regi_btm">
    <button type="button" onclick="doSubmit('save')" class="btn-lg btn-primary">저장</button>
		<button type="button" onclick="doSubmit('save_public')" class="btn-lg btn-warning">공개하기</button>
	    <button type="button" onclick="history.back();" class="btn-lg btn-default">취소</button>
      </div>
</div><!-- /container --></form>


<script>
    $(function() {
        $('#btnRecipeInsertGuide').click(function() {
            $('#recipeInsertGuideModal').modal('show');
        });
        $('#recipeInsertGuideModal').on('show.bs.modal',function() {
			var objId = '';
            switch ($("#cok_reg_type").val()) {
                case 'input' : objId = 'headingOne'; break; 
                case 'import' : objId = 'headingTwo'; break; 
                case 'edit' : objId = 'headingThree'; break;
			}
			if (!$("#" + objId).collapse().hasClass('in')) {
				setTimeout(function(){
                    $("#" + objId).trigger('click');
                }, 500);
			}
        });
		
        $('#btnRecipeInsertQnA').click(function() {
            if (confirm('문의하기 페이지로 이동되며\n저장하지 않은 글은 사라집니다.\n\n이 페이지에서 나가시겠습니까?')) {
                location.href='/customer/insert.html?bid=3';
            }   
        });

    });
</script>
<div id="recipeInsertGuideModal" class="modal fade">
    <div class="modal-dialog" style="width:1000px">
        <div class="modal-content new_folder">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><img src="http://recipe1.ezmember.co.kr/img/btn_close.gif" alt="닫기"></span></button>
                <h4 class="modal-title text-left">레시피 등록방법</h4>
            </div>
            <div class="modal-body" style="padding:0;">
                <div class="guide_tit"><img src="http://recipe1.ezmember.co.kr/img/guide_tt.gif"></div>
                <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                    <div class="panel panel-default">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            <div class="panel-heading" role="tab" id="headingOne">
                                <span class="guide_icon"><img src="http://recipe1.ezmember.co.kr/img/icon_guide_01.gif"></span>직접등록하기<i class="btn_arrow"><img src="http://recipe1.ezmember.co.kr/img/icon_arrow1_down.png"></i>
                            </div>
                        </a>
                        <div id="collapseOne" class="panel-collapse collapse out" role="tabpanel" aria-labelledby="headingOne">
                            <div class="panel-body" style="border-top:1px solid #e6e7e8;">
                                <img src="http://recipe1.ezmember.co.kr/img/guide1_01.jpg">
                                <br>
                                <img src="http://recipe1.ezmember.co.kr/img/guide1_02.jpg">
                                <br>
                                <img src="http://recipe1.ezmember.co.kr/img/guide1_03.jpg">
                            </div>
                        </div>
                    </div>
                    <!--/panel panel-default -->
					                    <!--/panel panel-default -->
                    <div class="panel panel-default">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
                            <div class="panel-heading" role="tab" id="headingThree">
                                <span class="guide_icon"><img src="http://recipe1.ezmember.co.kr/img/icon_guide_03.gif"></span>전문 레시피로 바꾸기<i class="btn_arrow"><img src="http://recipe1.ezmember.co.kr/img/icon_arrow1_down.png"></i>
                            </div>
                        </a>
                        <div id="collapseThree" class="panel-collapse collapse out" role="tabpanel" aria-labelledby="headingThree">
                            <div class="panel-body" style="border-top:1px solid #e6e7e8;">
                                <img src="http://recipe1.ezmember.co.kr/img/guide3_01.jpg">
                                <br>
                                <img src="http://recipe1.ezmember.co.kr/img/guide3_02.jpg">
                                <br>
                                <img src="http://recipe1.ezmember.co.kr/img/guide3_03.jpg">
                            </div>
                        </div>
                    </div>
                    <!--/panel panel-default -->
                </div>
                <!--/panel-group -->
                <div class="talk_guide"><span>원하시는 답변을 찾지 못하셨다면, Q&amp;A에 문의하여주세요. </span>
                    <button class="btn btn-default" type="button" id="btnRecipeInsertQnA">문의하기</button>
                </div>
            </div>
        </div>
    </div>
</div><input type="hidden" name="isRestrict" value="false" />
<script>
var curVRPage = 1;
var totalVRcnt = 0;
function getViewRecipeList(page)
{
    if($("#rRecipContDivPage_"+page).length > 0)
    {
        $("[id^='rRecipContDivPage_']").hide();
        $("#rRecipContDivPage_"+page).show();
        curVRPage = page;
        return ;
    }
    var rvArr = storageUtil.get('stRecentViewRecipe');
    if(!rvArr || rvArr == 'FAIL')
    {
        $("#recentRecipeDiv").hide();
        return ;
    }
    totalVRcnt = rvArr.length;
    var scale = 6;
    var skip = (page-1) * scale;
    var lastpage = Math.ceil(totalVRcnt/scale);
    var hstr = '';
    hstr += '<div id="rRecipContDivPage_'+page+'" class="row">';
    if(page > 1) hstr += '<a href="javascript:void(0);" class="list_btn_pre" onClick="getViewRecipeList('+(page-1)+')"><img src="http://recipe1.ezmember.co.kr/img/btn_arrow1_l.png" alt="이전"></a>';
    if(page < lastpage) hstr += '<a href="javascript:void(0);" class="list_btn_next" onClick="getViewRecipeList('+(page+1)+')"><img src="http://recipe1.ezmember.co.kr/img/btn_arrow1_r.png" alt="다음"></a>';
    for(var i=skip; i<skip+scale; i++)
    {
        var rvs = rvArr[i];
        if(!rvs) continue;
        hstr += '<div class="col-xs-2">';
        hstr += '<a class="thumbnail" href="/recipe/'+rvs.seq+'"><img src="'+rvs.thumb+'" style="width:180px; height:180px;">';
        hstr += '<div class="caption elipsis_rrtitle"><b>'+rvs.title+'</b></div></a>';
        hstr += '</div>';
    }
    hstr += '</div>';
    if(page != 1 && curVRPage > page) $("#recentRecipeContDiv").prepend(hstr);
    else  $("#recentRecipeContDiv").append(hstr);
    getViewRecipeList(page);
    $(".elipsis_rrtitle").ellipsis({row: 2});
}

$(document).ready(function () {
    getViewRecipeList(1);
})
</script>
<div id="recentRecipeDiv" class="container">
  <div class="rcp_lately_list">
    <h3>최근 본 레시피</h3>
    <div id="recentRecipeContDiv"></div>
  </div>
</div>
<script type="text/javascript">
<!--
$(document).ready(function() {
    $('#appDownLayerBtn').click(function (e) {
        // Used to stop the event bubbling..
        e.stopPropagation();
        if ($('.app_layer').is(':visible')) {
            $('.app_layer').hide();
        } else {
            $('.app_layer').show();
        }
    });
    $(document).click(function () {
        $('.app_layer').hide();
    });
});

function customerPropose()
{
    if(!$("#customerSend").val()) {
        alert('의견을 입력해주세요.');
        $("#customerSend").focus();
        return false;
    }

    $.ajax({
        type: "POST",
        url: "/customer/insert.html",
        data: {
            q_mode : 'insert',
            bid : '4',
			board_txt : $("#customerSend").val()
        },
        dataType: "json",
        success: function(result) {
			if (result.result == 'SUCCESS') {
	            alert('의견이 접수되었습니다. 감사합니다.');
	            $("#customerSend").val('');
			} else if (result.result == 'ERROR') {
                alert(result.msg);
            }
        }
    });
}
//-->
</script>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-xs-4 intro">
        <p class="f_link">
            <a href="http://www.ezhld.co.kr/2012_ezhld/company/company.html" target="_blank">회사소개</a><span>|</span>
            <a href="http://www.ezday.co.kr/advertise/home.html" target="_blank">광고문의</a><span>|</span>
            <a href="/user/rules.html?f=privacy" target="_blank">개인정보보호정책</a><span>|</span>
            <a href="/user/rules.html?f=contract" target="_blank">이용약관 </a><span>|</span>
            <a href="/customer/list.html">고객센터</a></span>
        </p>
        <p class="f_info">대표 : 이인경 / E : help@10000recipe.com / F : 02) 323-5049 <br>서울 금천구 가산동 371-50 에이스하이엔드타워 3차 1106-1호  <br>문의 : 070-4896-6416 (운영시간-오전10:00~오후5:00)</p>
		<p class="f_info">(주)이지에이치엘디 / 사업자등록번호 117-81-44101 / 통신판매업신고 <br>제 2009-서울금천-0631호 / 벤처기업확인 <br>서울지방중소기업청 제 031134233-1-01643호<br>등록번호 서울아01986 (2012.02.23) / 발행인 : 이인경, 편집인 : 이창득</p>
        <p class="copyright">Copyright <b>©EZHLD</b> Inc. All Rights Reserved</p>
      </div>
      <div class="col-xs-2 banner">
        <div class="app_layer" style="display:none;">
            <p class="tit">모바일 만개의 레시피 다운받기</p>
          <div class="layer_l"><img src="http://recipe1.ezmember.co.kr/img/img_ezqr1.gif" alt="안드로이드"><a href="https://market.android.com/details?id=com.ezhld.recipe" target="_blank"><img src="http://recipe1.ezmember.co.kr/img/btn_go.gif" alt="바로가기"></a></div>
          <div class="layer_r"><img src="http://recipe1.ezmember.co.kr/img/img_ezqr2.gif" alt="아이폰"><a href="https://itunes.apple.com/kr/app/yoribaeggwa-mangaeyi-resipi/id494190282?mt=8" target="_blank"><img src="http://recipe1.ezmember.co.kr/img/btn_go.gif" alt="바로가기"></a></div>
        </div>
        <a href="javascript:void(0);" id="appDownLayerBtn"><img src="http://recipe1.ezmember.co.kr/img/btm_app.gif" alt="app다운로드"></a>
        <a href="https://story.kakao.com/ch/10000recipe" target="_blank"><img src="http://recipe1.ezmember.co.kr/img/btm_kas.gif" alt="카카오스토리"></a>
      </div>
      <div class="col-xs-3 facebook">
          <div class="fb-page" data-href="https://www.facebook.com/10000recipe" data-width="280" data-hide-cover="false" data-show-facepile="true" data-show-posts="false"><div class="fb-xfbml-parse-ignore"><blockquote cite="https://www.facebook.com/10000recipe"><a href="https://www.facebook.com/10000recipe">만개의 레시피</a></blockquote></div></div>
      </div>
      <div class="col-xs-3 comment">
        <textarea id="customerSend" name="board_txt" class="form-control" placeholder="만개의레시피에 전하고 싶은 의견을 남겨주세요. 회원님의 의견에 항상 귀 기울이겠습니다."></textarea>
        <button class="btn btn-default" onclick="customerPropose();">의견제출</button>
        <p class="noti">개별회신을 원하시면 <a href="/customer/list.html?bid=3" style="text-decoration:underline; color:#666;">여기</a>에 문의하세요.</p>
      </div>
    </div>
  </div>
</div>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ko_KR/sdk.js#xfbml=1&version=v2.3&appId=436000339870193";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script type="text/javascript" src="http://recipe.ezmember.co.kr/static/js/jquery-ui-1.11.4.js" charset="utf-8"></script>
<script type="text/javascript" src="http://recipe.ezmember.co.kr/static/js/tag-it.min.js" charset="utf-8"></script>
<script type="text/javascript" src="http://recipe.ezmember.co.kr/static/js/ez_dialog.min_20151223.js" charset="utf-8"></script>
<script type="text/javascript" src="http://recipe.ezmember.co.kr/static/js/coreutil.min_20150609.js" charset="utf-8"></script>
<script type="text/javascript" src="http://recipe.ezmember.co.kr/static/js/ui.min_20150609.js" charset="utf-8"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-62003031-2', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>
</body>
</html>